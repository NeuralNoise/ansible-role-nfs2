---

- name: wrapper playbook for kitchen testing
  hosts: all
  gather_facts: no
  pre_tasks:
    - name: Ensure Python is installed
      raw: "[ -f /usr/bin/python ]
             || ! type apt-get >/dev/null 2>&1
             || (apt-get update && apt-get install -y python)"
      ignore_errors: yes
    - name: Gather facts
      setup:
  roles:
    - role: ansible-nfs
      nfs_exported_directories:
        - path: /export/test1
          hosts:
            - {name: 192.168.0.0/16, options: ["ro", "sync"]}
            - {name: 10.0.0.5, options: ["rw", "sync", "no_root_squash"]}
        - path: /export/test2
          hosts:
            - {name: "*", options: []}
